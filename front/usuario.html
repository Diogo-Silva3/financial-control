<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel = "shortcut icon" type = "imagem/x-icon" href = "assets/img/cash.ico"/>
    
    <!-- Fontes Profissionais Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/usuarios.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <link rel="stylesheet" href="assets/css/tipografia-profissional.css">
    <link rel="stylesheet" href="assets/css/sidebar.css">
    <link rel="stylesheet" href="assets/css/modern-theme.css">
    <title>Controle Financeiro - Sobre</title>
</head>
<body>
  <!-- Layout com Sidebar -->
  <div class="layout-container">
    <!-- Sidebar Lateral -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <a href="#">ControleFinanceiro</a>
        </div>
        
        <ul class="sidebar-menu">
            <li>
                <a href="usuario.html" class="active">
                    <span class="material-symbols-outlined">person</span>
                    <span id="nome-usuario-sidebar">Usu√°rio</span>
                </a>
            </li>
            <li>
                <a href="principal.html">
                    <span class="material-symbols-outlined">dashboard</span>
                    Painel
                </a>
            </li>
            <li>
                <a href="sobre.html">
                    <span class="material-symbols-outlined">info</span>
                    Sobre
                </a>
            </li>
        </ul>
        
        <div class="sidebar-section">
            <div class="sidebar-section-title">Ferramentas</div>
            <ul class="sidebar-menu">
                <li>
                    <a href="principal.html">
                        <span class="material-symbols-outlined">account_balance</span>
                        Minhas Contas
                    </a>
                </li>
                <li>
                    <a href="principal.html">
                        <span class="material-symbols-outlined">security</span>
                        Seguran√ßa
                    </a>
                </li>
                <li>
                    <a href="principal.html">
                        <span class="material-symbols-outlined">upload_file</span>
                        Importar CSV
                    </a>
                </li>
                <li>
                    <a href="principal.html">
                        <span class="material-symbols-outlined">palette</span>
                        Temas
                    </a>
                </li>
                <li>
                    <a href="principal.html">
                        <span class="material-symbols-outlined">emoji_events</span>
                        Conquistas
                    </a>
                </li>
            </ul>
        </div>
        
        <div class="sidebar-logout">
            <a href="#" id="logout">
                <span class="material-symbols-outlined">logout</span>
                Sair
            </a>
        </div>
    </aside>
    
    <!-- Bot√£o toggle para mobile -->
    <button class="sidebar-toggle" id="sidebarToggle">
        <span class="material-symbols-outlined">menu</span>
    </button>
    
    <!-- Overlay para mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- Conte√∫do Principal -->
    <div class="main-content">
      <section class="principal">
        <sectionv class="card dados-usuario">
          <div class="d-flex justify-content-center">
            <div class="spinner-border spinner" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          
          <h5 class="card-title">Dados do Usu√°rio</h5>
          
          <!-- Upload de Foto de Perfil -->
          <div style="text-align: center; margin-bottom: 2rem;">
            <div style="position: relative; display: inline-block;">
              <img id="fotoPerfil" class="foto-perfil" 
                   src="https://ui-avatars.com/api/?name=Usuario&size=120&background=fbbf24&color=1e293b&bold=true" 
                   alt="Foto de Perfil"
                   style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid #fbbf24; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
              <label for="inputFotoPerfil" style="position: absolute; bottom: 0; right: 0; background: #fbbf24; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                <span class="material-symbols-outlined" style="font-size: 1.2rem; color: #1e293b;">photo_camera</span>
              </label>
              <input type="file" id="inputFotoPerfil" accept="image/*" style="display: none;">
            </div>
            <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #64748b;">Clique na c√¢mera para alterar</p>
            <p id="fotoStatus" style="font-size: 0.85rem; margin-top: 0.5rem;"></p>
          </div>
          
          <p>Complete seu cadastro</p>
          <p id="usuario-alerta" class="alerta-msg-v"></p>
      <div class="input-group flex-nowrap muted">
        <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Nome">badge</span>
        <input type="text" name="nome" id="usuario-nome" class="form-control" placeholder="Nome" aria-label="Username" aria-describedby="addon-wrapping">
      </div>
      <div class="input-group flex-nowrap muted">
        <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Sobrenome">family_restroom</span>
        <input type="text" name="sobrenome" id="usuario-sobrenome" class="form-control" placeholder="Sobre Nome" aria-label="Username" aria-describedby="addon-wrapping">
      </div>
      <div class="input-group flex-nowrap muted">
        <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Telefone">call</span>
        <input type="number" name="telefone" id="usuario-telefone" class="form-control" placeholder="Telefone" aria-label="Username" aria-describedby="addon-wrapping">
      </div>
      <br>
      <div class="input-group flex-nowrap muted">
        <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="CEP">signpost</span>
        <input type="text" name="cep" id="usuario-cep" class="form-control" placeholder="CEP" aria-label="Username" aria-describedby="addon-wrapping">
      </div>
      <section id="campo_endereco">
        <div class="input-group flex-nowrap muted">
          <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Endere√ßo">add_road</span>
          <input type="text" name="endereco" id="usuario-endereco" class="form-control" placeholder="Endereco" aria-label="Username" aria-describedby="addon-wrapping">
        </div>
        <div class="input-group flex-nowrap muted">
          <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Numero">pin</span>
          <input type="number" name="numero" id="usuario-numero" class="form-control" placeholder="Numero" aria-label="Username" aria-describedby="addon-wrapping">
        </div>
        <div class="input-group flex-nowrap muted">
          <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Bairro">holiday_village</span>
          <input type="text" name="bairro" id="usuario-bairro" class="form-control" placeholder="Bairro" aria-label="Username" aria-describedby="addon-wrapping">
        </div>
        <div class="input-group flex-nowrap muted">
          <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Cidade">apartment</span>
          <input type="text" name="cidade" id="usuario-cidade" class="form-control" placeholder="Cidade" aria-label="Username" aria-describedby="addon-wrapping">
        </div>
        <div class="input-group flex-nowrap muted">
          <span class="input-group-text material-symbols-outlined" id="addon-wrapping" data-bs-toggle="tooltip" data-bs-title="Estado">map</span>
          <input type="text" name="estado" id="usuario-estado" class="form-control" placeholder="Estado" aria-label="Username" aria-describedby="addon-wrapping">
        </div>
      </section>
      <br>
      <button id="botao-atualiza_usuario" type="button" class="btn btn-primary">Salvar Dados</button>
      <p class="alerta-msg" id="alerta"></p>
    </section>
  </section>
  
  <footer id="sticky-footer" class="flex-shrink-0 py-4 bg-dark text-white-50">
    <div class="container text-center">
        <small>&copy; API Controle Financeiro</small>
    </div>
  </footer>
  
  </div> <!-- Fim main-content -->
  </div> <!-- Fim layout-container -->

  <script src="./assets/js/jquery-3.6.3.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD" crossorigin="anonymous"></script>
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
  
  <script src="./assets/js/scripts.js"></script>
  <script src="./assets/js/firebase-init.js"></script>
  <script src="./assets/js/firebase-uploads.js"></script>
  <script src="./assets/js/usuario.js"></script>
  
  <!-- Script para upload de foto de perfil -->
  <script>
    // Upload de foto de perfil
    document.getElementById('inputFotoPerfil').addEventListener('change', async function(e) {
      const file = e.target.files[0];
      
      if (!file) return;
      
      // Preview imediato
      previewImagem(file, 'fotoPerfil');
      
      // Mostrar status
      const statusEl = document.getElementById('fotoStatus');
      statusEl.textContent = 'üì§ Enviando foto...';
      statusEl.style.color = '#3b82f6';
      
      // Upload para Firebase
      const result = await uploadFotoPerfil(file);
      
      if (result.success) {
        statusEl.textContent = '‚úÖ Foto atualizada com sucesso!';
        statusEl.style.color = '#10b981';
        
        // Limpar mensagem ap√≥s 3 segundos
        setTimeout(() => {
          statusEl.textContent = '';
        }, 3000);
      } else {
        statusEl.textContent = '‚ùå Erro: ' + result.error;
        statusEl.style.color = '#ef4444';
      }
    });
  </script>
  
  <!-- Script para toggle da sidebar no mobile -->
  <script>
      document.getElementById('sidebarToggle').addEventListener('click', function() {
          document.getElementById('sidebar').classList.toggle('active');
          document.getElementById('sidebarOverlay').classList.toggle('active');
      });
      
      document.getElementById('sidebarOverlay').addEventListener('click', function() {
          document.getElementById('sidebar').classList.remove('active');
          document.getElementById('sidebarOverlay').classList.remove('active');
      });
  </script>
</body>
</html>